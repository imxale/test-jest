steps:
  # Step 1: Install dependencies
  - name: 'gcr.io/cloud-builders/npm'
    args: ['install']

  # Step 2: Build the application
  - name: 'gcr.io/cloud-builders/npm'
    args: ['run', 'build']

  # Step 3: Run tests
  - name: 'gcr.io/cloud-builders/npm'
    args: ['test']

  # Step 4: Deploy to Cloud Run
  - name: 'gcr.io/cloud-builders/gcloud'
    args: [
      'run', 'deploy', 'your-service-name', '--image', 'gcr.io/tensile-tenure-423308-e5/your-image-name',
      '--platform', 'managed', '--region', 'us-east1', '--allow-unauthenticated'
    ]

# Timeout for the entire build process
timeout: '1600s'
